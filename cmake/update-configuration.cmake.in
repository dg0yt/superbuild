set(OUTPUT_DIR      "@CMAKE_CURRENT_BINARY_DIR@")
set(DPKG_PORTS_PATH "@DPKG_PORTS_PATH@")
set(VCPKG_ROOT      "@VCPKG_ROOT@")
set(GIT_EXECUTABLE  "@GIT_EXECUTABLE@")

execute_process(
  COMMAND "${GIT_EXECUTABLE}" log -n 1 --format=%H
  WORKING_DIRECTORY "${VCPKG_ROOT}"
  OUTPUT_VARIABLE VCPKG_HEAD
  OUTPUT_STRIP_TRAILING_WHITESPACE
  RESULT_VARIABLE result
)
if(NOT result EQUAL 0)
    message(FATAL_ERROR "Failed to retrieve vcpkg HEAD revision SHA-1.")
endif()

execute_process(
  COMMAND "${GIT_EXECUTABLE}" log -n 1 --format=%H
  WORKING_DIRECTORY "${DPKG_PORTS_PATH}"
  OUTPUT_VARIABLE DPKG_PORTS_HEAD
  OUTPUT_STRIP_TRAILING_WHITESPACE
  RESULT_VARIABLE result
)
if(NOT result EQUAL 0)
    message(FATAL_ERROR "Failed to retrieve source HEAD revision SHA-1.")
endif()

set(KIND_FILE "")
set(KIND_GIT [[$disabled-]])
set(KIND_FILE [[$disabled-]])
set(KIND_GIT "")
configure_file(
  "${DPKG_PORTS_PATH}/cmake/vcpkg-configuration.json.in"
  "${VCPKG_ROOT}/vcpkg-configuration.json"
  @ONLY
)

configure_file(
  "${DPKG_PORTS_PATH}/cmake/options.in"
  "${VCPKG_ROOT}/options"
  @ONLY
)

configure_file(
  "${OUTPUT_DIR}/all_ports"
  "${VCPKG_ROOT}/all_ports"
  COPYONLY
)
